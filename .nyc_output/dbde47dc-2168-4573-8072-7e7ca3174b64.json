{"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\Role.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\Role.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"14":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":32}},"17":{"start":{"line":17,"column":14},"end":{"line":17,"column":63}},"18":{"start":{"line":18,"column":18},"end":{"line":18,"column":70}},"19":{"start":{"line":19,"column":21},"end":{"line":19,"column":61}},"20":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":60}},"22":{"start":{"line":27,"column":0},"end":{"line":30,"column":33}},"23":{"start":{"line":31,"column":0},"end":{"line":34,"column":35}},"24":{"start":{"line":35,"column":0},"end":{"line":38,"column":35}},"25":{"start":{"line":39,"column":0},"end":{"line":42,"column":42}},"26":{"start":{"line":43,"column":0},"end":{"line":46,"column":40}},"27":{"start":{"line":47,"column":0},"end":{"line":50,"column":40}},"28":{"start":{"line":51,"column":0},"end":{"line":54,"column":42}},"29":{"start":{"line":52,"column":32},"end":{"line":52,"column":52}},"30":{"start":{"line":55,"column":0},"end":{"line":60,"column":27}},"31":{"start":{"line":61,"column":0},"end":{"line":61,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":32},"end":{"line":25,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":52,"column":26},"end":{"line":52,"column":27}},"loc":{"start":{"line":52,"column":32},"end":{"line":52,"column":52}},"line":52}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"14":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"15":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"16":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"17":{"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":132}},"type":"cond-expr","locations":[{"start":{"line":45,"column":121},"end":{"line":45,"column":123}},{"start":{"line":45,"column":126},"end":{"line":45,"column":132}}],"line":45},"18":{"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":102}},"type":"binary-expr","locations":[{"start":{"line":45,"column":43},"end":{"line":45,"column":82}},{"start":{"line":45,"column":86},"end":{"line":45,"column":102}}],"line":45},"19":{"loc":{"start":{"line":49,"column":30},"end":{"line":49,"column":132}},"type":"cond-expr","locations":[{"start":{"line":49,"column":121},"end":{"line":49,"column":123}},{"start":{"line":49,"column":126},"end":{"line":49,"column":132}}],"line":49},"20":{"loc":{"start":{"line":49,"column":43},"end":{"line":49,"column":102}},"type":"binary-expr","locations":[{"start":{"line":49,"column":43},"end":{"line":49,"column":82}},{"start":{"line":49,"column":86},"end":{"line":49,"column":102}}],"line":49},"21":{"loc":{"start":{"line":53,"column":30},"end":{"line":53,"column":132}},"type":"cond-expr","locations":[{"start":{"line":53,"column":121},"end":{"line":53,"column":123}},{"start":{"line":53,"column":126},"end":{"line":53,"column":132}}],"line":53},"22":{"loc":{"start":{"line":53,"column":43},"end":{"line":53,"column":102}},"type":"binary-expr","locations":[{"start":{"line":53,"column":43},"end":{"line":53,"column":82}},{"start":{"line":53,"column":86},"end":{"line":53,"column":102}}],"line":53}},"s":{"0":1,"1":8,"2":8,"3":8,"4":8,"5":0,"6":0,"7":0,"8":0,"9":8,"10":1,"11":10,"12":10,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":1,"20":19,"21":2,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":57,"30":1,"31":1},"f":{"0":8,"1":10,"2":1,"3":19,"4":57},"b":{"0":[1,1,1],"1":[0,8],"2":[1,7],"3":[8,0],"4":[8,8],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[8,8,1],"10":[1,1,1],"11":[10,0],"12":[10,10],"13":[1,1,1],"14":[1,0],"15":[1,1],"16":[2,17],"17":[1,0],"18":[1,1],"19":[1,0],"20":[1,1],"21":[0,1],"22":[1,0]},"inputSourceMap":{"version":3,"file":"Role.js","sourceRoot":"","sources":["Role.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,iCAAgC;AAChC,gEAA6F;AAC7F,uEAAiD;AACjD,8DAAqC;AAuBrC,MAAqB,IAAK,SAAQ,eAAS;IAoBlC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAE,IAAU;QACtC,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;YACpB,IAAI,CAAC,IAAI,GAAG,gBAAM,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;SACtC;IACH,CAAC;CAIF;AA1BC;IADC,IAAA,YAAM,EAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;;gCACX;AAGjB;IADC,IAAA,YAAM,GAAE;;kCACU;AAGnB;IADC,IAAA,YAAM,GAAE;;kCACU;AAGnB;IADC,IAAA,YAAM,GAAE;;yCACiB;AAG1B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACpB,gBAAQ,oBAAR,gBAAQ;uCAAA;AAG1B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACtC,gBAAQ,oBAAR,gBAAQ;uCAAA;AAU1B;IADC,IAAA,gBAAU,EAAC,GAAG,EAAE,CAAC,oBAAU,CAAC;kDACT,gBAAU,oBAAV,gBAAU;yCAAmB;AAPjD;IADC,IAAA,gBAAU,GAAE;;qCACuB,IAAI;;0BAIvC;AAxBH,uBA4BC","sourcesContent":["import { DateTime } from 'luxon'\nimport { BaseModel, beforeSave, column, ManyToMany, manyToMany } from '@ioc:Adonis/Lucid/Orm'\nimport { string } from '@ioc:Adonis/Core/Helpers'\nimport Permission from './Permission'\n\n/**\n * @swagger\n * components:\n *   schemas:\n *    Role:\n *      type: object\n *      properties:\n *        id:\n *          type: number\n *        name:\n *          type: string\n *        slug:\n *          type: string\n *        description:\n *          type: string\n *        created_at:\n *          type: string\n *        updated_at:\n *          type: string\n *\n */\nexport default class Role extends BaseModel {\n  @column({ isPrimary: true })\n  public id: number\n\n  @column()\n  public name: string\n\n  @column()\n  public slug: string\n\n  @column()\n  public description: string\n\n  @column.dateTime({ autoCreate: true })\n  public createdAt: DateTime\n\n  @column.dateTime({ autoCreate: true, autoUpdate: true })\n  public updatedAt: DateTime\n\n  @beforeSave()\n  public static async makeSlug (role: Role) {\n    if (role.$dirty.name) {\n      role.slug = string.dotCase(role.name)\n    }\n  }\n\n  @manyToMany(() => Permission)\n  public permissions: ManyToMany<typeof Permission>\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"72ecd4faa90941e6913f7eb83389529ac2fcb070","contentHash":"19c20e8d218f6a10ad46f0c639d9ba0144118b1da68e89eb9194675ab78ae83a"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\Permission.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\Permission.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":12,"column":0},"end":{"line":12,"column":62}},"14":{"start":{"line":13,"column":16},"end":{"line":13,"column":32}},"15":{"start":{"line":14,"column":14},"end":{"line":14,"column":63}},"16":{"start":{"line":15,"column":18},"end":{"line":15,"column":70}},"17":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"18":{"start":{"line":19,"column":12},"end":{"line":19,"column":72}},"19":{"start":{"line":23,"column":0},"end":{"line":26,"column":39}},"20":{"start":{"line":27,"column":0},"end":{"line":30,"column":41}},"21":{"start":{"line":31,"column":0},"end":{"line":34,"column":41}},"22":{"start":{"line":35,"column":0},"end":{"line":38,"column":48}},"23":{"start":{"line":39,"column":0},"end":{"line":42,"column":46}},"24":{"start":{"line":43,"column":0},"end":{"line":46,"column":46}},"25":{"start":{"line":47,"column":0},"end":{"line":52,"column":33}},"26":{"start":{"line":53,"column":0},"end":{"line":53,"column":29}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":38},"end":{"line":21,"column":5}},"line":17}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":20,"column":9}},{"start":{"line":18,"column":8},"end":{"line":20,"column":9}}],"line":18},"14":{"loc":{"start":{"line":41,"column":30},"end":{"line":41,"column":132}},"type":"cond-expr","locations":[{"start":{"line":41,"column":121},"end":{"line":41,"column":123}},{"start":{"line":41,"column":126},"end":{"line":41,"column":132}}],"line":41},"15":{"loc":{"start":{"line":41,"column":43},"end":{"line":41,"column":102}},"type":"binary-expr","locations":[{"start":{"line":41,"column":43},"end":{"line":41,"column":82}},{"start":{"line":41,"column":86},"end":{"line":41,"column":102}}],"line":41},"16":{"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":132}},"type":"cond-expr","locations":[{"start":{"line":45,"column":121},"end":{"line":45,"column":123}},{"start":{"line":45,"column":126},"end":{"line":45,"column":132}}],"line":45},"17":{"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":102}},"type":"binary-expr","locations":[{"start":{"line":45,"column":43},"end":{"line":45,"column":82}},{"start":{"line":45,"column":86},"end":{"line":45,"column":102}}],"line":45}},"s":{"0":1,"1":7,"2":7,"3":7,"4":7,"5":0,"6":0,"7":0,"8":0,"9":7,"10":1,"11":9,"12":9,"13":1,"14":1,"15":1,"16":1,"17":17,"18":17,"19":1,"20":1,"21":1,"22":1,"23":1,"24":1,"25":1,"26":1},"f":{"0":7,"1":9,"2":17},"b":{"0":[1,1,1],"1":[0,7],"2":[1,6],"3":[7,0],"4":[7,7],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[7,7,1],"10":[1,1,1],"11":[9,0],"12":[9,9],"13":[17,0],"14":[1,0],"15":[1,1],"16":[1,0],"17":[1,1]},"inputSourceMap":{"version":3,"file":"Permission.js","sourceRoot":"","sources":["Permission.ts"],"names":[],"mappings":";;;;;;;;;;;;AAAA,iCAAgC;AAChC,gEAAqE;AACrE,uEAAiD;AAuBjD,MAAqB,UAAW,SAAQ,eAAS;IAoBxC,MAAM,CAAC,KAAK,CAAC,QAAQ,CAAE,UAAsB;QAClD,IAAI,UAAU,CAAC,MAAM,CAAC,IAAI,EAAE;YAC1B,UAAU,CAAC,IAAI,GAAG,gBAAM,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;SAClD;IACH,CAAC;CACF;AAvBC;IADC,IAAA,YAAM,EAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;;sCACX;AAGjB;IADC,IAAA,YAAM,GAAE;;wCACU;AAGnB;IADC,IAAA,YAAM,GAAE;;wCACU;AAGnB;IADC,IAAA,YAAM,GAAE;;+CACiB;AAG1B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACpB,gBAAQ,oBAAR,gBAAQ;6CAAA;AAG1B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACtC,gBAAQ,oBAAR,gBAAQ;6CAAA;AAG1B;IADC,IAAA,gBAAU,GAAE;;qCAC6B,UAAU;;gCAInD;AAxBH,6BAyBC","sourcesContent":["import { DateTime } from 'luxon'\nimport { BaseModel, beforeSave, column } from '@ioc:Adonis/Lucid/Orm'\nimport { string } from '@ioc:Adonis/Core/Helpers'\n\n/**\n * @swagger\n * components:\n *  schemas:\n *    Permission:\n *      type: object\n *      properties:\n *        id:\n *          type: number\n *        name:\n *          type: string\n *        slug:\n *          type: string\n *        description:\n *          type: string\n *        created_at:\n *          type: string\n *        updated_at:\n *          type: string\n *\n */\nexport default class Permission extends BaseModel {\n  @column({ isPrimary: true })\n  public id: number\n\n  @column()\n  public name: string\n\n  @column()\n  public slug: string\n\n  @column()\n  public description: string\n\n  @column.dateTime({ autoCreate: true })\n  public createdAt: DateTime\n\n  @column.dateTime({ autoCreate: true, autoUpdate: true })\n  public updatedAt: DateTime\n\n  @beforeSave()\n  public static async makeSlug (permission: Permission) {\n    if (permission.$dirty.name) {\n      permission.slug = string.dotCase(permission.name)\n    }\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"221303f47d0625a7e043e26898ed8df6b1e25fa4","contentHash":"826778a6870dc6f4ceaa87d82a1a52ac725f58b278ce984c2413c301f4452c80"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\User.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Models\\User.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"14":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"16":{"start":{"line":16,"column":16},"end":{"line":16,"column":32}},"17":{"start":{"line":17,"column":15},"end":{"line":17,"column":81}},"18":{"start":{"line":18,"column":14},"end":{"line":18,"column":63}},"19":{"start":{"line":19,"column":15},"end":{"line":19,"column":49}},"20":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"21":{"start":{"line":23,"column":12},"end":{"line":23,"column":69}},"22":{"start":{"line":27,"column":0},"end":{"line":30,"column":33}},"23":{"start":{"line":31,"column":0},"end":{"line":34,"column":36}},"24":{"start":{"line":35,"column":0},"end":{"line":38,"column":39}},"25":{"start":{"line":39,"column":0},"end":{"line":42,"column":46}},"26":{"start":{"line":43,"column":0},"end":{"line":46,"column":40}},"27":{"start":{"line":47,"column":0},"end":{"line":50,"column":40}},"28":{"start":{"line":51,"column":0},"end":{"line":54,"column":35}},"29":{"start":{"line":55,"column":0},"end":{"line":58,"column":36}},"30":{"start":{"line":56,"column":32},"end":{"line":56,"column":46}},"31":{"start":{"line":59,"column":0},"end":{"line":64,"column":31}},"32":{"start":{"line":65,"column":0},"end":{"line":65,"column":23}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":36},"end":{"line":25,"column":5}},"line":21},"4":{"name":"(anonymous_4)","decl":{"start":{"line":56,"column":26},"end":{"line":56,"column":27}},"loc":{"start":{"line":56,"column":32},"end":{"line":56,"column":46}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"14":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"15":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"16":{"loc":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},{"start":{"line":22,"column":8},"end":{"line":24,"column":9}}],"line":22},"17":{"loc":{"start":{"line":45,"column":30},"end":{"line":45,"column":132}},"type":"cond-expr","locations":[{"start":{"line":45,"column":121},"end":{"line":45,"column":123}},{"start":{"line":45,"column":126},"end":{"line":45,"column":132}}],"line":45},"18":{"loc":{"start":{"line":45,"column":43},"end":{"line":45,"column":102}},"type":"binary-expr","locations":[{"start":{"line":45,"column":43},"end":{"line":45,"column":82}},{"start":{"line":45,"column":86},"end":{"line":45,"column":102}}],"line":45},"19":{"loc":{"start":{"line":49,"column":30},"end":{"line":49,"column":132}},"type":"cond-expr","locations":[{"start":{"line":49,"column":121},"end":{"line":49,"column":123}},{"start":{"line":49,"column":126},"end":{"line":49,"column":132}}],"line":49},"20":{"loc":{"start":{"line":49,"column":43},"end":{"line":49,"column":102}},"type":"binary-expr","locations":[{"start":{"line":49,"column":43},"end":{"line":49,"column":82}},{"start":{"line":49,"column":86},"end":{"line":49,"column":102}}],"line":49},"21":{"loc":{"start":{"line":57,"column":30},"end":{"line":57,"column":132}},"type":"cond-expr","locations":[{"start":{"line":57,"column":121},"end":{"line":57,"column":123}},{"start":{"line":57,"column":126},"end":{"line":57,"column":132}}],"line":57},"22":{"loc":{"start":{"line":57,"column":43},"end":{"line":57,"column":102}},"type":"binary-expr","locations":[{"start":{"line":57,"column":43},"end":{"line":57,"column":82}},{"start":{"line":57,"column":86},"end":{"line":57,"column":102}}],"line":57}},"s":{"0":1,"1":9,"2":9,"3":9,"4":9,"5":0,"6":0,"7":0,"8":0,"9":9,"10":1,"11":11,"12":11,"13":1,"14":2,"15":1,"16":1,"17":1,"18":1,"19":1,"20":4,"21":4,"22":1,"23":1,"24":1,"25":1,"26":1,"27":1,"28":1,"29":1,"30":64,"31":1,"32":1},"f":{"0":9,"1":11,"2":2,"3":4,"4":64},"b":{"0":[1,1,1],"1":[0,9],"2":[1,8],"3":[9,0],"4":[9,9],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[9,9,1],"10":[1,1,1],"11":[11,0],"12":[11,11],"13":[1,1,1],"14":[1,1],"15":[2,2],"16":[4,0],"17":[1,0],"18":[1,1],"19":[1,0],"20":[1,1],"21":[0,1],"22":[1,0]},"inputSourceMap":{"version":3,"file":"User.js","sourceRoot":"","sources":["User.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,iCAAgC;AAChC,kFAAwC;AACxC,gEAM8B;AAC9B,kDAAyB;AAuBzB,MAAqB,IAAK,SAAQ,eAAS;IAuBlC,MAAM,CAAC,KAAK,CAAC,YAAY,CAAE,IAAU;QAC1C,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;YACxB,IAAI,CAAC,QAAQ,GAAG,MAAM,cAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;SAC/C;IACH,CAAC;CAIF;AA7BC;IADC,IAAA,YAAM,EAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;;gCACX;AAGjB;IADC,IAAA,YAAM,GAAE;;mCACW;AAGpB;IADC,IAAA,YAAM,EAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC;;sCACP;AAGvB;IADC,IAAA,YAAM,GAAE;;6CACsB;AAG/B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACpB,gBAAQ,oBAAR,gBAAQ;uCAAA;AAG1B;IADC,YAAM,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;kDACtC,gBAAQ,oBAAR,gBAAQ;uCAAA;AAG1B;IADC,IAAA,YAAM,GAAE;;kCACW;AAUpB;IADC,IAAA,gBAAU,EAAC,GAAG,EAAE,CAAC,cAAI,CAAC;kDACT,gBAAU,oBAAV,gBAAU;mCAAa;AAPrC;IADC,IAAA,gBAAU,GAAE;;qCAC2B,IAAI;;8BAI3C;AA3BH,uBA+BC","sourcesContent":["import { DateTime } from 'luxon'\nimport Hash from '@ioc:Adonis/Core/Hash'\nimport {\n  column,\n  beforeSave,\n  BaseModel,\n  manyToMany,\n  ManyToMany,\n} from '@ioc:Adonis/Lucid/Orm'\nimport Role from './Role'\n\n/**\n * @swagger\n * components:\n *   schemas:\n *    User:\n *      type: object\n *      properties:\n *        id:\n *          type: number\n *        name:\n *          type: string\n *        email:\n *          type: string\n *        remember_me_token:\n *          type: string\n *        created_at:\n *          type: string\n *        updated_at:\n *          type: string\n *\n */\nexport default class User extends BaseModel {\n  @column({ isPrimary: true })\n  public id: number\n\n  @column()\n  public email: string\n\n  @column({ serializeAs: null })\n  public password: string\n\n  @column()\n  public rememberMeToken?: string\n\n  @column.dateTime({ autoCreate: true })\n  public createdAt: DateTime\n\n  @column.dateTime({ autoCreate: true, autoUpdate: true })\n  public updatedAt: DateTime\n\n  @column()\n  public name?: string\n\n  @beforeSave()\n  public static async hashPassword (user: User) {\n    if (user.$dirty.password) {\n      user.password = await Hash.make(user.password)\n    }\n  }\n\n  @manyToMany(() => Role)\n  public roles: ManyToMany<typeof Role>\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"39a52e3a30990d282cb1816d3a17355c7a2fd42b","contentHash":"2a47eb4ae9d1ba03f428731f5580a22fc908055a1b4ce3fa6862910eaee08a0b"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\SilentAuth.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\SilentAuth.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":27}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":21}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":39}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":33},"end":{"line":7,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":12,"2":12,"3":1},"f":{"0":12},"b":{},"inputSourceMap":{"version":3,"file":"SilentAuth.js","sourceRoot":"","sources":["SilentAuth.ts"],"names":[],"mappings":";;AAQA,MAAqB,oBAAoB;IAIhC,KAAK,CAAC,MAAM,CAAE,EAAE,IAAI,EAAuB,EAAE,IAAyB;QAK3E,MAAM,IAAI,CAAC,KAAK,EAAE,CAAA;QAClB,MAAM,IAAI,EAAE,CAAA;IACd,CAAC;CACF;AAZD,uCAYC","sourcesContent":["import { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'\n\n/**\n * Silent auth middleware can be used as a global middleware to silent check\n * if the user is logged-in or not.\n *\n * The request continues as usual, even when the user is not logged-in.\n */\nexport default class SilentAuthMiddleware {\n  /**\n   * Handle request\n   */\n  public async handle ({ auth }: HttpContextContract, next: () => Promise<void>) {\n    /**\n     * Check if user is logged-in or not. If yes, then `ctx.auth.user` will be\n     * set to the instance of the currently logged in user.\n     */\n    await auth.check()\n    await next()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a26f5f7651c0c60a04632ffdca13e35463cd42e6","contentHash":"8acb3328d2cb579f8019e75f4b68a6988daa9ea72727c95f05589ad632f7ecb3"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\DetectUserLocale.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\DetectUserLocale.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":83}},"4":{"start":{"line":9,"column":33},"end":{"line":9,"column":66}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":83}},"6":{"start":{"line":13,"column":25},"end":{"line":13,"column":50}},"7":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"8":{"start":{"line":15,"column":12},"end":{"line":15,"column":44}},"9":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"10":{"start":{"line":18,"column":12},"end":{"line":18,"column":47}},"11":{"start":{"line":20,"column":8},"end":{"line":20,"column":21}},"12":{"start":{"line":23,"column":0},"end":{"line":23,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":25},"end":{"line":11,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":12,"column":4},"end":{"line":12,"column":5}},"loc":{"start":{"line":12,"column":28},"end":{"line":21,"column":5}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":10,"column":15},"end":{"line":10,"column":82}},"type":"binary-expr","locations":[{"start":{"line":10,"column":15},"end":{"line":10,"column":53}},{"start":{"line":10,"column":57},"end":{"line":10,"column":82}}],"line":10},"4":{"loc":{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},"type":"if","locations":[{"start":{"line":14,"column":8},"end":{"line":16,"column":9}},{"start":{"line":14,"column":8},"end":{"line":16,"column":9}}],"line":14},"5":{"loc":{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},"type":"if","locations":[{"start":{"line":17,"column":8},"end":{"line":19,"column":9}},{"start":{"line":17,"column":8},"end":{"line":19,"column":9}}],"line":17}},"s":{"0":1,"1":1,"2":1,"3":1,"4":12,"5":12,"6":12,"7":12,"8":12,"9":12,"10":12,"11":12,"12":1},"f":{"0":1,"1":12,"2":12},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[12,0],"4":[12,0],"5":[12,0]},"inputSourceMap":{"version":3,"file":"DetectUserLocale.js","sourceRoot":"","sources":["DetectUserLocale.ts"],"names":[],"mappings":";;;;;AAAA,oFAA0C;AAc1C,MAAqB,gBAAgB;IAQzB,eAAe,CAAE,GAAwB;QACjD,MAAM,gBAAgB,GAAG,cAAI,CAAC,gBAAgB,EAAE,CAAA;QAChD,OAAO,GAAG,CAAC,OAAO,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;IAC5E,CAAC;IAMM,KAAK,CAAC,MAAM,CAAE,GAAwB,EAAE,IAAyB;QACtE,MAAM,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;QAM1C,IAAI,QAAQ,EAAE;YACZ,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAA;SAChC;QAKD,IAAI,MAAM,IAAI,GAAG,EAAE;YACjB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,CAAC,CAAA;SACnC;QAED,MAAM,IAAI,EAAE,CAAA;IACd,CAAC;CACF;AArCD,mCAqCC","sourcesContent":["import I18n from '@ioc:Adonis/Addons/I18n'\nimport { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'\n\n/**\n * The middleware detects the user language using the \"Accept-language\" HTTP header\n * or the \"lang\" query string parameter.\n *\n * Feel free to change the middleware implementation to what suits your needs. Just\n * make sure\n *\n * - You always ensure the user selected language is supported by your app.\n * - Only call \"switchLocale\" when the detected language is valid string value and\n *   not \"null\" or \"undefined\"\n */\nexport default class DetectUserLocale {\n  /**\n   * Detect user language using \"Accept-language\" header or\n   * the \"lang\" query string parameter.\n   *\n   * The user language must be part of the \"supportedLocales\", otherwise\n   * this method should return null.\n   */\n  protected getUserLanguage (ctx: HttpContextContract) {\n    const availableLocales = I18n.supportedLocales()\n    return ctx.request.language(availableLocales) || ctx.request.input('lang')\n  }\n\n  /**\n   * Handle method is called by AdonisJS automatically on every middleware\n   * class.\n   */\n  public async handle (ctx: HttpContextContract, next: () => Promise<void>) {\n    const language = this.getUserLanguage(ctx)\n\n    /**\n     * Switch locale when we are able to detect the user language and it\n     * is supported by the application\n     */\n    if (language) {\n      ctx.i18n.switchLocale(language)\n    }\n\n    /**\n     * Share i18n with view\n     */\n    if ('view' in ctx) {\n      ctx.view.share({ i18n: ctx.i18n })\n    }\n\n    await next()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"85f383f9e4bd2e4720573a482d11dc42df77e8ac","contentHash":"a7aae391ce91b53220219e5ac52190943299717882c9f2687d682f2712260274"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\Can.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Middleware\\Can.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":24},"end":{"line":6,"column":99}},"4":{"start":{"line":9,"column":24},"end":{"line":9,"column":75}},"5":{"start":{"line":10,"column":22},"end":{"line":10,"column":27}},"6":{"start":{"line":11,"column":8},"end":{"line":17,"column":11}},"7":{"start":{"line":12,"column":12},"end":{"line":16,"column":15}},"8":{"start":{"line":13,"column":16},"end":{"line":15,"column":17}},"9":{"start":{"line":14,"column":20},"end":{"line":14,"column":35}},"10":{"start":{"line":18,"column":8},"end":{"line":27,"column":9}},"11":{"start":{"line":19,"column":12},"end":{"line":25,"column":15}},"12":{"start":{"line":26,"column":12},"end":{"line":26,"column":19}},"13":{"start":{"line":28,"column":8},"end":{"line":28,"column":21}},"14":{"start":{"line":31,"column":0},"end":{"line":31,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":56},"end":{"line":29,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":24},"end":{"line":11,"column":25}},"loc":{"start":{"line":11,"column":38},"end":{"line":17,"column":9}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":12,"column":36},"end":{"line":12,"column":37}},"loc":{"start":{"line":12,"column":54},"end":{"line":16,"column":13}},"line":12}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":13,"column":16},"end":{"line":15,"column":17}},"type":"if","locations":[{"start":{"line":13,"column":16},"end":{"line":15,"column":17}},{"start":{"line":13,"column":16},"end":{"line":15,"column":17}}],"line":13},"4":{"loc":{"start":{"line":18,"column":8},"end":{"line":27,"column":9}},"type":"if","locations":[{"start":{"line":18,"column":8},"end":{"line":27,"column":9}},{"start":{"line":18,"column":8},"end":{"line":27,"column":9}}],"line":18}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":2,"9":1,"10":1,"11":0,"12":0,"13":1,"14":1},"f":{"0":1,"1":1,"2":2,"3":2},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[1,1],"4":[0,1]},"inputSourceMap":{"version":3,"file":"Can.js","sourceRoot":"","sources":["Can.ts"],"names":[],"mappings":";;;;;AACA,oGAAqD;AAErD,MAAqB,GAAG;IACf,KAAK,CAAC,MAAM,CAAE,EAAE,QAAQ,EAAE,IAAI,EAAuB,EAAE,IAAyB,EAAE,WAAqB;QAC5G,MAAM,OAAO,GAAG,MAAM,uBAAa,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QACzD,IAAI,OAAO,GAAG,KAAK,CAAA;QACnB,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;YAC3B,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;gBACvC,IAAI,cAAc,KAAK,UAAU,EAAE;oBACjC,OAAO,GAAG,IAAI,CAAA;iBACf;YACH,CAAC,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,OAAO,EAAE;YACZ,QAAQ,CAAC,YAAY,CAAC;gBACpB,MAAM,EAAE;oBACN;wBACE,OAAO,EAAE,yCAAyC;qBACnD;iBACF;aACF,CAAC,CAAA;YACF,OAAM;SACP;QAED,MAAM,IAAI,EAAE,CAAA;IACd,CAAC;CACF;AAzBD,sBAyBC","sourcesContent":["import type { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'\nimport AccessControl from 'App/Classes/AccessControl'\n\nexport default class Can {\n  public async handle ({ response, auth }: HttpContextContract, next: () => Promise<void>, permissions: string[]) {\n    const userACl = await AccessControl.getAcl(auth.user?.id)\n    let userCan = false\n    permissions.map(permission => {\n      userACl.permissions.map(userPermission => {\n        if (userPermission === permission) {\n          userCan = true\n        }\n      })\n    })\n\n    if (!userCan) {\n      response.unauthorized({\n        errors: [\n          {\n            message: 'You do not have the required permission',\n          },\n        ],\n      })\n      return\n    }\n\n    await next()\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ecec6b18549afb5cc910c09b5eb10e7a1a12b2d4","contentHash":"eaf2ce3d4d64bf5a248d851088dde9eef9dfe83c708dd6a9544697e316a8b48d"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Classes\\AccessControl.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Classes\\AccessControl.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":80}},"4":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"5":{"start":{"line":10,"column":12},"end":{"line":10,"column":71}},"6":{"start":{"line":12,"column":21},"end":{"line":15,"column":20}},"7":{"start":{"line":13,"column":39},"end":{"line":13,"column":67}},"8":{"start":{"line":16,"column":22},"end":{"line":16,"column":24}},"9":{"start":{"line":17,"column":28},"end":{"line":17,"column":30}},"10":{"start":{"line":18,"column":8},"end":{"line":23,"column":11}},"11":{"start":{"line":19,"column":12},"end":{"line":19,"column":34}},"12":{"start":{"line":20,"column":12},"end":{"line":22,"column":15}},"13":{"start":{"line":21,"column":16},"end":{"line":21,"column":50}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":77}},"15":{"start":{"line":27,"column":0},"end":{"line":27,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":32},"end":{"line":25,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":30},"end":{"line":13,"column":31}},"loc":{"start":{"line":13,"column":39},"end":{"line":13,"column":67}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":18,"column":24},"end":{"line":18,"column":25}},"loc":{"start":{"line":18,"column":32},"end":{"line":23,"column":9}},"line":18},"4":{"name":"(anonymous_4)","decl":{"start":{"line":20,"column":33},"end":{"line":20,"column":34}},"loc":{"start":{"line":20,"column":47},"end":{"line":22,"column":13}},"line":20}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},"type":"if","locations":[{"start":{"line":9,"column":8},"end":{"line":11,"column":9}},{"start":{"line":9,"column":8},"end":{"line":11,"column":9}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":13,"5":2,"6":11,"7":11,"8":11,"9":11,"10":11,"11":21,"12":21,"13":171,"14":11,"15":1},"f":{"0":1,"1":13,"2":11,"3":21,"4":171},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[2,11]},"inputSourceMap":{"version":3,"file":"AccessControl.js","sourceRoot":"","sources":["AccessControl.ts"],"names":[],"mappings":";;;;;AAAA,iFAAkC;AAElC,MAAqB,aAAa;IACzB,MAAM,CAAC,KAAK,CAAC,MAAM,CAAE,MAA0B;QACpD,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,EAAC,KAAK,EAAE,CAAC,OAAO,CAAC,EAAE,WAAW,EAAE,CAAC,cAAc,CAAC,EAAC,CAAA;SACzD;QAED,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE;aAC5B,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;aACvD,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC;aACnB,KAAK,EAAE,CAAA;QAEV,MAAM,KAAK,GAAa,EAAE,CAAA;QAC1B,MAAM,WAAW,GAAa,EAAE,CAAA;QAEhC,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YACrB,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACrB,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,CAAC,EAAE;gBAChC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAA;YACnC,CAAC,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;QAEF,OAAO,EAAC,KAAK,EAAE,CAAC,GAAG,KAAK,CAAC,EAAE,WAAW,EAAE,CAAC,GAAG,IAAI,GAAG,CAAC,WAAW,CAAC,CAAC,EAAC,CAAA;IACpE,CAAC;CACF;AAvBD,gCAuBC","sourcesContent":["import User from 'App/Models/User'\n\nexport default class AccessControl {\n  public static async getAcl (userId: number | undefined) {\n    if (!userId) {\n      return {roles: ['guest'], permissions: ['access.guest']}\n    }\n\n    const user = await User.query()\n      .preload('roles', query => query.preload('permissions'))\n      .where('id', userId)\n      .first()\n\n    const roles: string[] = []\n    const permissions: string[] = []\n\n    user?.roles.map(role => {\n      roles.push(role.slug)\n      role.permissions.map(permission => {\n        permissions.push(permission.slug)\n      })\n    })\n\n    return {roles: [...roles], permissions: [...new Set(permissions)]}\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4c058906cb01683b99ec92ffba707e3ce05c352a","contentHash":"e87e3f97255d7353dcefb99912ead94753adea01cc68aa8232b1b46e865ab0f0"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Controllers\\Http\\UsersController.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Controllers\\Http\\UsersController.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":15},"end":{"line":6,"column":80}},"4":{"start":{"line":7,"column":24},"end":{"line":7,"column":99}},"5":{"start":{"line":8,"column":24},"end":{"line":8,"column":102}},"6":{"start":{"line":9,"column":15},"end":{"line":9,"column":80}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":82}},"8":{"start":{"line":13,"column":21},"end":{"line":13,"column":45}},"9":{"start":{"line":14,"column":22},"end":{"line":14,"column":48}},"10":{"start":{"line":15,"column":22},"end":{"line":19,"column":34}},"11":{"start":{"line":17,"column":12},"end":{"line":17,"column":41}},"12":{"start":{"line":20,"column":8},"end":{"line":24,"column":11}},"13":{"start":{"line":27,"column":8},"end":{"line":27,"column":82}},"14":{"start":{"line":28,"column":21},"end":{"line":28,"column":68}},"15":{"start":{"line":29,"column":21},"end":{"line":29,"column":54}},"16":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"17":{"start":{"line":31,"column":12},"end":{"line":31,"column":72}},"18":{"start":{"line":33,"column":8},"end":{"line":36,"column":9}},"19":{"start":{"line":34,"column":29},"end":{"line":34,"column":93}},"20":{"start":{"line":35,"column":12},"end":{"line":35,"column":60}},"21":{"start":{"line":37,"column":8},"end":{"line":40,"column":11}},"22":{"start":{"line":43,"column":8},"end":{"line":43,"column":81}},"23":{"start":{"line":44,"column":21},"end":{"line":47,"column":20}},"24":{"start":{"line":45,"column":41},"end":{"line":45,"column":69}},"25":{"start":{"line":48,"column":20},"end":{"line":48,"column":66}},"26":{"start":{"line":49,"column":8},"end":{"line":56,"column":11}},"27":{"start":{"line":53,"column":56},"end":{"line":53,"column":63}},"28":{"start":{"line":59,"column":8},"end":{"line":59,"column":83}},"29":{"start":{"line":60,"column":21},"end":{"line":60,"column":68}},"30":{"start":{"line":61,"column":21},"end":{"line":61,"column":63}},"31":{"start":{"line":62,"column":8},"end":{"line":62,"column":31}},"32":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"33":{"start":{"line":64,"column":12},"end":{"line":64,"column":72}},"34":{"start":{"line":66,"column":8},"end":{"line":69,"column":9}},"35":{"start":{"line":67,"column":29},"end":{"line":67,"column":93}},"36":{"start":{"line":68,"column":12},"end":{"line":68,"column":60}},"37":{"start":{"line":70,"column":8},"end":{"line":73,"column":11}},"38":{"start":{"line":76,"column":8},"end":{"line":76,"column":84}},"39":{"start":{"line":77,"column":21},"end":{"line":77,"column":103}},"40":{"start":{"line":78,"column":8},"end":{"line":78,"column":76}},"41":{"start":{"line":78,"column":66},"end":{"line":78,"column":73}},"42":{"start":{"line":79,"column":8},"end":{"line":79,"column":28}},"43":{"start":{"line":80,"column":8},"end":{"line":83,"column":11}},"44":{"start":{"line":86,"column":0},"end":{"line":86,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":48},"end":{"line":25,"column":5}},"line":11},"2":{"name":"(anonymous_2)","decl":{"start":{"line":16,"column":30},"end":{"line":16,"column":31}},"loc":{"start":{"line":16,"column":41},"end":{"line":18,"column":9}},"line":16},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":48},"end":{"line":41,"column":5}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":46},"end":{"line":57,"column":5}},"line":42},"5":{"name":"(anonymous_5)","decl":{"start":{"line":45,"column":30},"end":{"line":45,"column":31}},"loc":{"start":{"line":45,"column":41},"end":{"line":45,"column":69}},"line":45},"6":{"name":"(anonymous_6)","decl":{"start":{"line":53,"column":48},"end":{"line":53,"column":49}},"loc":{"start":{"line":53,"column":56},"end":{"line":53,"column":63}},"line":53},"7":{"name":"(anonymous_7)","decl":{"start":{"line":58,"column":4},"end":{"line":58,"column":5}},"loc":{"start":{"line":58,"column":57},"end":{"line":74,"column":5}},"line":58},"8":{"name":"(anonymous_8)","decl":{"start":{"line":75,"column":4},"end":{"line":75,"column":5}},"loc":{"start":{"line":75,"column":49},"end":{"line":84,"column":5}},"line":75},"9":{"name":"(anonymous_9)","decl":{"start":{"line":78,"column":58},"end":{"line":78,"column":59}},"loc":{"start":{"line":78,"column":66},"end":{"line":78,"column":73}},"line":78}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},"type":"if","locations":[{"start":{"line":30,"column":8},"end":{"line":32,"column":9}},{"start":{"line":30,"column":8},"end":{"line":32,"column":9}}],"line":30},"4":{"loc":{"start":{"line":33,"column":8},"end":{"line":36,"column":9}},"type":"if","locations":[{"start":{"line":33,"column":8},"end":{"line":36,"column":9}},{"start":{"line":33,"column":8},"end":{"line":36,"column":9}}],"line":33},"5":{"loc":{"start":{"line":52,"column":19},"end":{"line":52,"column":46}},"type":"cond-expr","locations":[{"start":{"line":52,"column":26},"end":{"line":52,"column":39}},{"start":{"line":52,"column":42},"end":{"line":52,"column":46}}],"line":52},"6":{"loc":{"start":{"line":53,"column":26},"end":{"line":53,"column":69}},"type":"cond-expr","locations":[{"start":{"line":53,"column":33},"end":{"line":53,"column":64}},{"start":{"line":53,"column":67},"end":{"line":53,"column":69}}],"line":53},"7":{"loc":{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},"type":"if","locations":[{"start":{"line":63,"column":8},"end":{"line":65,"column":9}},{"start":{"line":63,"column":8},"end":{"line":65,"column":9}}],"line":63},"8":{"loc":{"start":{"line":66,"column":8},"end":{"line":69,"column":9}},"type":"if","locations":[{"start":{"line":66,"column":8},"end":{"line":69,"column":9}},{"start":{"line":66,"column":8},"end":{"line":69,"column":9}}],"line":66}},"s":{"0":1,"1":4,"2":1,"3":1,"4":1,"5":1,"6":1,"7":2,"8":1,"9":1,"10":1,"11":1,"12":1,"13":5,"14":5,"15":2,"16":2,"17":0,"18":2,"19":2,"20":2,"21":2,"22":2,"23":1,"24":1,"25":1,"26":1,"27":2,"28":1,"29":1,"30":1,"31":1,"32":1,"33":0,"34":1,"35":1,"36":1,"37":1,"38":1,"39":1,"40":1,"41":1,"42":1,"43":1,"44":1},"f":{"0":4,"1":2,"2":1,"3":5,"4":2,"5":1,"6":2,"7":1,"8":1,"9":1},"b":{"0":[1,1,1],"1":[4,0],"2":[4,4],"3":[0,2],"4":[2,0],"5":[1,0],"6":[1,0],"7":[0,1],"8":[1,0]},"inputSourceMap":{"version":3,"file":"UsersController.js","sourceRoot":"","sources":["UsersController.ts"],"names":[],"mappings":";;;;;AACA,iFAAkC;AAClC,oGAAqD;AACrD,uGAAwD;AACxD,iFAAkC;AAElC,MAAqB,eAAe;IAyB3B,KAAK,CAAC,KAAK,CAAE,EAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAsB;QACnE,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,aAAa,CAAC,CAAA;QACzE,MAAM,IAAI,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,CAAC,CAAA;QACrC,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,EAAE,CAAC,CAAA;QACxC,MAAM,KAAK,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE;aAC7B,OAAO,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE;YAC1B,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAA;QAC9B,CAAC,CAAC;aACD,QAAQ,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;QAExB,OAAO,QAAQ,CAAC,EAAE,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI;YACzB,IAAI,EAAE,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI;SAC1B,CAAC,CAAA;IACJ,CAAC;IAiDM,KAAK,CAAC,KAAK,CAAE,EAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAsB;QACnE,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,aAAa,CAAC,CAAA;QAEzE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,CAAC,uBAAa,CAAC,CAAA;QAElD,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;QAEpC,IAAI,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC7B,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAA;SAC5D;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC9B,MAAM,QAAQ,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,WAAW,EAAE,CAAA;YACvE,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAA;SAChD;QAED,OAAO,QAAQ,CAAC,OAAO,CAAC;YACtB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,IAAI;SACX,CAAC,CAAA;IACJ,CAAC;IA2BM,KAAK,CAAC,IAAI,CAAE,EAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAsB;QACjE,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;QAExE,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE;aAC5B,OAAO,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC;aACzD,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,CAAC;aACtB,KAAK,EAAE,CAAA;QAEV,MAAM,GAAG,GAAG,MAAM,uBAAa,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QAEhD,OAAO,QAAQ,CAAC,EAAE,CAAC;YACjB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE;gBACJ,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,IAAI;gBAC9B,QAAQ,EAAE,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE;gBACrD,GAAG;aACJ;SACF,CAAC,CAAA;IACJ,CAAC;IAqDM,KAAK,CAAC,MAAM,CAAE,EAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAsB;QAC5E,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,cAAc,CAAC,CAAA;QAC1E,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,QAAQ,CAAC,uBAAa,CAAC,CAAA;QAElD,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,UAAU,CAAC,MAAM,CAAC,EAAE,CAAC,CAAA;QAE7C,MAAM,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;QAEtB,IAAI,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC7B,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAA;SAC5D;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,EAAE;YAC9B,MAAM,QAAQ,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC,WAAW,EAAE,CAAA;YACvE,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAA;SAChD;QAED,OAAO,QAAQ,CAAC,QAAQ,CAAC;YACvB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,IAAI;SACX,CAAC,CAAA;IACJ,CAAC;IAyBM,KAAK,CAAC,OAAO,CAAE,EAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAsB;QACpE,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,eAAe,CAAC,CAAA;QAC3E,MAAM,IAAI,GAAG,MAAM,cAAI,CAAC,KAAK,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,IAAI,EAAE,MAAM,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAA;QACrF,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA;QACnE,MAAM,IAAI,CAAC,MAAM,EAAE,CAAA;QAEnB,OAAO,QAAQ,CAAC,QAAQ,CAAC;YACvB,OAAO,EAAE,IAAI;YACb,IAAI,EAAE,IAAI;SACX,CAAC,CAAA;IACJ,CAAC;CACF;AAxQD,kCAwQC","sourcesContent":["import type { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'\nimport User from 'App/Models/User'\nimport AccessControl from 'App/Classes/AccessControl'\nimport UserValidator from 'App/Validators/UserValidator'\nimport Role from 'App/Models/Role'\n\nexport default class UsersController {\n  /**\n   * @swagger\n   * /api/users:\n   *   get:\n   *     security:\n   *       - bearerAuth: []\n   *     tags:\n   *       - Users\n   *     description: List of users. Needed permission \"users.index\"\n   *     parameters:\n   *       - name: page\n   *         in: query\n   *         required: false\n   *       - name: limit\n   *         in: query\n   *         required: false\n   *     produces:\n   *       - application/json\n   *     responses:\n   *       200:\n   *         description: Success\n   *       403:\n   *         description: Forbidden\n   */\n  public async index ({bouncer, request, response}: HttpContextContract) {\n    await bouncer.with('AccessControlPolicy').authorize('can', 'users.index')\n    const page = request.input('page', 1)\n    const limit = request.input('limit', 10)\n    const users = await User.query()\n      .preload('roles', (query) => {\n        query.preload('permissions')\n      })\n      .paginate(page, limit)\n\n    return response.ok({\n      message: 'OK',\n      data: users.toJSON().data,\n      meta: users.toJSON().meta,\n    })\n  }\n\n  /**\n   * @swagger\n   * /api/users:\n   *   post:\n   *     security:\n   *       - bearerAuth: []\n   *     tags:\n   *       - Users\n   *     description: Store new user. Needed permission \"users.store\"\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           description: User payload\n   *           schema:\n   *             type: object\n   *             properties:\n   *               name:\n   *                 type: string\n   *                 example: 'James Bond'\n   *                 required: true\n   *               email:\n   *                 type: string\n   *                 example: 'Bond007@example.com'\n   *                 required: true\n   *               password:\n   *                 type: string\n   *                 example: '0007password'\n   *                 required: true\n   *               password_confirmation:\n   *                 type: string\n   *                 example: '0007password'\n   *                 required: true\n   *               role_ids:\n   *                 type: array\n   *                 example: [1]\n   *                 required: false\n   *     produces:\n   *       - application/json\n   *     responses:\n   *       200:\n   *         description: Success\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/User'\n   */\n  public async store ({bouncer, request, response}: HttpContextContract) {\n    await bouncer.with('AccessControlPolicy').authorize('can', 'users.store')\n\n    const data = await request.validate(UserValidator)\n\n    const user = await User.create(data)\n\n    if (request.input('role_ids')) {\n      await user.related('roles').sync(request.input('role_ids'))\n    }\n\n    if (!request.input('role_ids')) {\n      const roleUser = await Role.query().where('slug', 'user').firstOrFail()\n      await user.related('roles').sync([roleUser.id])\n    }\n\n    return response.created({\n      message: 'OK',\n      data: user,\n    })\n  }\n\n  /**\n   * @swagger\n   * /api/users/{id}:\n   *   get:\n   *     parameters:\n   *       - name: id\n   *         in: path\n   *         required: true\n   *     security:\n   *       - bearerAuth: []\n   *     tags:\n   *       - Users\n   *     description: Show a existent user. Needed permission \"users.show\"\n   *     produces:\n   *       - application/json\n   *     responses:\n   *       200:\n   *         description: Success\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/User'\n   *       403:\n   *         description: Forbidden\n   */\n  public async show ({bouncer, response, params}: HttpContextContract) {\n    await bouncer.with('AccessControlPolicy').authorize('can', 'users.show')\n\n    const user = await User.query()\n      .preload('roles', (query) => query.preload('permissions'))\n      .where('id', params.id)\n      .first()\n\n    const acl = await AccessControl.getAcl(user?.id)\n\n    return response.ok({\n      message: 'OK',\n      data: {\n        ...user ? user.toJSON() : null,\n        role_ids: user ? user.roles.map(role => role.id) : [],\n        acl,\n      },\n    })\n  }\n\n  /**\n   * @swagger\n   * /api/users/{id}:\n   *   put:\n   *     tags:\n   *       - Users\n   *     security:\n   *       - bearerAuth: []\n   *     description: Update existent user. Needed permission \"users.update\"\n   *     parameters:\n   *       - name: id\n   *         in: path\n   *         required: true\n   *     requestBody:\n   *       required: true\n   *       content:\n   *         application/json:\n   *           description: User payload\n   *           schema:\n   *             type: object\n   *             properties:\n   *               name:\n   *                 type: string\n   *                 example: 'James Bond'\n   *                 required: true\n   *               email:\n   *                 type: string\n   *                 example: 'Bond007@example.com'\n   *                 required: true\n   *               password:\n   *                 type: string\n   *                 example: '0007password'\n   *                 required: true\n   *               password_confirmation:\n   *                 type: string\n   *                 example: '0007password'\n   *                 required: true\n   *               role_ids:\n   *                 type: array\n   *                 example: [1, 2]\n   *                 required: false\n   *     produces:\n   *       - application/json\n   *     responses:\n   *       202:\n   *         description: Success\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/User'\n   */\n  public async update ({bouncer, request, response, params}: HttpContextContract) {\n    await bouncer.with('AccessControlPolicy').authorize('can', 'users.update')\n    const data = await request.validate(UserValidator)\n\n    const user = await User.findOrFail(params.id)\n\n    await user.merge(data)\n\n    if (request.input('role_ids')) {\n      await user.related('roles').sync(request.input('role_ids'))\n    }\n\n    if (!request.input('role_ids')) {\n      const roleUser = await Role.query().where('slug', 'user').firstOrFail()\n      await user.related('roles').sync([roleUser.id])\n    }\n\n    return response.accepted({\n      message: 'OK',\n      data: user,\n    })\n  }\n\n  /**\n   * @swagger\n   * /api/users/{id}:\n   *   delete:\n   *     tags:\n   *       - Users\n   *     security:\n   *       - bearerAuth: []\n   *     description: Destroy existent user. Needed permission \"users.destroy\"\n   *     parameters:\n   *       - name: id\n   *         in: path\n   *         required: true\n   *     produces:\n   *       - application/json\n   *     responses:\n   *       202:\n   *         description: Success\n   *         content:\n   *           application/json:\n   *             schema:\n   *               $ref: '#/components/schemas/User'\n   */\n  public async destroy ({bouncer, response, params}: HttpContextContract) {\n    await bouncer.with('AccessControlPolicy').authorize('can', 'users.destroy')\n    const user = await User.query().preload('roles').where('id', params.id).firstOrFail()\n    await user.related('roles').detach(user.roles.map(role => role.id))\n    await user.delete()\n\n    return response.accepted({\n      message: 'OK',\n      data: user,\n    })\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"c866331491bbf4fb35fd6ccb61b4340ca8514e81","contentHash":"ab06ec95542df473590ced3fcaa769f593c0402c592a32eae17cec60db21bd4a"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Validators\\UserValidator.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Validators\\UserValidator.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":20},"end":{"line":3,"column":74}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":23}},"3":{"start":{"line":7,"column":8},"end":{"line":38,"column":11}},"4":{"start":{"line":39,"column":8},"end":{"line":39,"column":27}},"5":{"start":{"line":42,"column":0},"end":{"line":42,"column":32}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":21},"end":{"line":40,"column":5}},"line":5}},"branchMap":{"0":{"loc":{"start":{"line":18,"column":24},"end":{"line":18,"column":91}},"type":"cond-expr","locations":[{"start":{"line":18,"column":46},"end":{"line":18,"column":86}},{"start":{"line":18,"column":89},"end":{"line":18,"column":91}}],"line":18},"1":{"loc":{"start":{"line":21,"column":16},"end":{"line":37,"column":21}},"type":"cond-expr","locations":[{"start":{"line":23,"column":20},"end":{"line":29,"column":21}},{"start":{"line":31,"column":20},"end":{"line":37,"column":21}}],"line":21}},"s":{"0":1,"1":1,"2":6,"3":6,"4":6,"5":1},"f":{"0":6},"b":{"0":[1,5],"1":[1,5]},"inputSourceMap":{"version":3,"file":"UserValidator.js","sourceRoot":"","sources":["UserValidator.ts"],"names":[],"mappings":";;AAAA,2EAAwE;AAGxE,MAAqB,aAAa;IAChC,YAAuB,GAAwB;QAAxB,QAAG,GAAH,GAAG,CAAqB;QAqBxC,WAAM,GAAG,kBAAM,CAAC,MAAM,CAAC;YAC5B,IAAI,EAAE,kBAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;gBAClC,iBAAK,CAAC,SAAS,CAAC,CAAC,CAAC;gBAClB,iBAAK,CAAC,SAAS,CAAC,EAAE,CAAC;aACpB,CAAC;YACF,KAAK,EAAE,kBAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;gBACnC,iBAAK,CAAC,KAAK,EAAE;gBACb,iBAAK,CAAC,MAAM,CAAC;oBACX,KAAK,EAAE,OAAO;oBACd,MAAM,EAAE,OAAO;oBACf,eAAe,EAAE,IAAI;oBACrB,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC,EAAC,QAAQ,EAAE,EAAC,EAAE,EAAE,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAC,EAAC,CAAC,CAAC,CAAC,EAAE,CAAC;iBACrE,CAAC;aACH,CAAC;YACF,GAAG,CACD,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE;gBACjB,CAAC;oBACD;wBACE,QAAQ,EAAE,kBAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;4BAC/C,iBAAK,CAAC,SAAS,CAAC,CAAC,CAAC;4BAClB,iBAAK,CAAC,SAAS,CAAC,GAAG,CAAC;4BACpB,iBAAK,CAAC,SAAS,EAAE;yBAClB,CAAC;qBACH;gBACD,CAAC;oBACD;wBACE,QAAQ,EAAE,kBAAM,CAAC,MAAM,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE;4BACtC,iBAAK,CAAC,SAAS,CAAC,CAAC,CAAC;4BAClB,iBAAK,CAAC,SAAS,CAAC,GAAG,CAAC;4BACpB,iBAAK,CAAC,SAAS,EAAE;yBAClB,CAAC;qBACH,CACJ;SACF,CAAC,CAAA;QAaK,aAAQ,GAAmB,EAAE,CAAA;IAnEc,CAAC;CAoEpD;AArED,gCAqEC","sourcesContent":["import {schema, CustomMessages, rules} from '@ioc:Adonis/Core/Validator'\nimport type { HttpContextContract } from '@ioc:Adonis/Core/HttpContext'\n\nexport default class UserValidator {\n  constructor (protected ctx: HttpContextContract) {}\n\n  /*\n   * Define schema to validate the \"shape\", \"type\", \"formatting\" and \"integrity\" of data.\n   *\n   * For example:\n   * 1. The username must be of data type string. But then also, it should\n   *    not contain special characters or numbers.\n   *    ```\n   *     schema.string({}, [ rules.alpha() ])\n   *    ```\n   *\n   * 2. The email must be of data type string, formatted as a valid\n   *    email. But also, not used by any other user.\n   *    ```\n   *     schema.string({}, [\n   *       rules.email(),\n   *       rules.unique({ table: 'users', column: 'email' }),\n   *     ])\n   *    ```\n   */\n  public schema = schema.create({\n    name: schema.string({ trim: true }, [\n      rules.minLength(4),\n      rules.maxLength(64),\n    ]),\n    email: schema.string({ trim: true }, [\n      rules.email(),\n      rules.unique({\n        table: 'users',\n        column: 'email',\n        caseInsensitive: true,\n        ...(this.ctx.params?.id ? {whereNot: {id: this.ctx.params.id}} : {}),\n      }),\n    ]),\n    ...(\n      this.ctx.params?.id\n        ?\n        {\n          password: schema.string.optional({ trim: true }, [\n            rules.minLength(6),\n            rules.maxLength(128),\n            rules.confirmed(),\n          ]),\n        }\n        :\n        {\n          password: schema.string({ trim: true }, [\n            rules.minLength(6),\n            rules.maxLength(128),\n            rules.confirmed(),\n          ]),\n        }\n    ),\n  })\n\n  /**\n   * Custom messages for validation failures. You can make use of dot notation `(.)`\n   * for targeting nested fields and array expressions `(*)` for targeting all\n   * children of an array. For example:\n   *\n   * {\n   *   'profile.username.required': 'Username is required',\n   *   'scores.*.number': 'Define scores as valid numbers'\n   * }\n   *\n   */\n  public messages: CustomMessages = {}\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fa046866e6b6bd0b728ea6e3d1af068fb719d557","contentHash":"4d3a3cfb4282f9fd7bfd122e9f8e1c105ba3ce7d4dd9ac0a4640c7ca0afb606e"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Policies\\AccessControlPolicy.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Policies\\AccessControlPolicy.ts","statementMap":{"0":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"1":{"start":{"line":3,"column":12},"end":{"line":3,"column":28}},"2":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"3":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"4":{"start":{"line":4,"column":79},"end":{"line":4,"column":131}},"5":{"start":{"line":5,"column":9},"end":{"line":5,"column":150}},"6":{"start":{"line":5,"column":22},"end":{"line":5,"column":43}},"7":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"8":{"start":{"line":5,"column":81},"end":{"line":5,"column":150}},"9":{"start":{"line":6,"column":4},"end":{"line":6,"column":66}},"10":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"11":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"12":{"start":{"line":9,"column":79},"end":{"line":9,"column":109}},"13":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"14":{"start":{"line":12,"column":4},"end":{"line":12,"column":62}},"15":{"start":{"line":15,"column":0},"end":{"line":15,"column":62}},"16":{"start":{"line":16,"column":18},"end":{"line":16,"column":72}},"17":{"start":{"line":17,"column":24},"end":{"line":17,"column":99}},"18":{"start":{"line":20,"column":24},"end":{"line":20,"column":70}},"19":{"start":{"line":21,"column":22},"end":{"line":21,"column":27}},"20":{"start":{"line":22,"column":8},"end":{"line":26,"column":11}},"21":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"22":{"start":{"line":24,"column":16},"end":{"line":24,"column":31}},"23":{"start":{"line":27,"column":8},"end":{"line":27,"column":23}},"24":{"start":{"line":30,"column":24},"end":{"line":30,"column":70}},"25":{"start":{"line":31,"column":28},"end":{"line":31,"column":33}},"26":{"start":{"line":32,"column":8},"end":{"line":36,"column":11}},"27":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"28":{"start":{"line":34,"column":16},"end":{"line":34,"column":37}},"29":{"start":{"line":37,"column":8},"end":{"line":37,"column":29}},"30":{"start":{"line":40,"column":0},"end":{"line":45,"column":46}},"31":{"start":{"line":46,"column":0},"end":{"line":51,"column":47}},"32":{"start":{"line":52,"column":0},"end":{"line":52,"column":38}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":46},"end":{"line":2,"column":47}},"loc":{"start":{"line":2,"column":87},"end":{"line":7,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":46},"end":{"line":8,"column":47}},"loc":{"start":{"line":8,"column":62},"end":{"line":10,"column":1}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":56},"end":{"line":11,"column":57}},"loc":{"start":{"line":11,"column":71},"end":{"line":13,"column":1}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":25},"end":{"line":28,"column":5}},"line":19},"4":{"name":"(anonymous_4)","decl":{"start":{"line":22,"column":26},"end":{"line":22,"column":27}},"loc":{"start":{"line":22,"column":38},"end":{"line":26,"column":9}},"line":22},"5":{"name":"(anonymous_5)","decl":{"start":{"line":29,"column":4},"end":{"line":29,"column":5}},"loc":{"start":{"line":29,"column":32},"end":{"line":38,"column":5}},"line":29},"6":{"name":"(anonymous_6)","decl":{"start":{"line":32,"column":32},"end":{"line":32,"column":33}},"loc":{"start":{"line":32,"column":50},"end":{"line":36,"column":9}},"line":32}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":17},"end":{"line":7,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":18},"end":{"line":2,"column":22}},{"start":{"line":2,"column":26},"end":{"line":2,"column":41}},{"start":{"line":2,"column":46},"end":{"line":7,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":34},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":42},"end":{"line":3,"column":48}},{"start":{"line":3,"column":51},"end":{"line":3,"column":125}}],"line":3},"2":{"loc":{"start":{"line":3,"column":51},"end":{"line":3,"column":125}},"type":"cond-expr","locations":[{"start":{"line":3,"column":67},"end":{"line":3,"column":118}},{"start":{"line":3,"column":121},"end":{"line":3,"column":125}}],"line":3},"3":{"loc":{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":4,"column":4},"end":{"line":5,"column":150}},{"start":{"line":4,"column":4},"end":{"line":5,"column":150}}],"line":4},"4":{"loc":{"start":{"line":4,"column":8},"end":{"line":4,"column":77}},"type":"binary-expr","locations":[{"start":{"line":4,"column":8},"end":{"line":4,"column":35}},{"start":{"line":4,"column":39},"end":{"line":4,"column":77}}],"line":4},"5":{"loc":{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},"type":"if","locations":[{"start":{"line":5,"column":58},"end":{"line":5,"column":150}},{"start":{"line":5,"column":58},"end":{"line":5,"column":150}}],"line":5},"6":{"loc":{"start":{"line":5,"column":85},"end":{"line":5,"column":149}},"type":"binary-expr","locations":[{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},{"start":{"line":5,"column":148},"end":{"line":5,"column":149}}],"line":5},"7":{"loc":{"start":{"line":5,"column":86},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":94},"end":{"line":5,"column":98}},{"start":{"line":5,"column":101},"end":{"line":5,"column":143}}],"line":5},"8":{"loc":{"start":{"line":5,"column":101},"end":{"line":5,"column":143}},"type":"cond-expr","locations":[{"start":{"line":5,"column":109},"end":{"line":5,"column":126}},{"start":{"line":5,"column":129},"end":{"line":5,"column":143}}],"line":5},"9":{"loc":{"start":{"line":6,"column":11},"end":{"line":6,"column":62}},"type":"binary-expr","locations":[{"start":{"line":6,"column":11},"end":{"line":6,"column":16}},{"start":{"line":6,"column":20},"end":{"line":6,"column":21}},{"start":{"line":6,"column":25},"end":{"line":6,"column":62}}],"line":6},"10":{"loc":{"start":{"line":8,"column":17},"end":{"line":10,"column":1}},"type":"binary-expr","locations":[{"start":{"line":8,"column":18},"end":{"line":8,"column":22}},{"start":{"line":8,"column":26},"end":{"line":8,"column":41}},{"start":{"line":8,"column":46},"end":{"line":10,"column":1}}],"line":8},"11":{"loc":{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},"type":"if","locations":[{"start":{"line":9,"column":4},"end":{"line":9,"column":109}},{"start":{"line":9,"column":4},"end":{"line":9,"column":109}}],"line":9},"12":{"loc":{"start":{"line":9,"column":8},"end":{"line":9,"column":77}},"type":"binary-expr","locations":[{"start":{"line":9,"column":8},"end":{"line":9,"column":35}},{"start":{"line":9,"column":39},"end":{"line":9,"column":77}}],"line":9},"13":{"loc":{"start":{"line":11,"column":22},"end":{"line":13,"column":1}},"type":"binary-expr","locations":[{"start":{"line":11,"column":23},"end":{"line":11,"column":27}},{"start":{"line":11,"column":31},"end":{"line":11,"column":51}},{"start":{"line":11,"column":56},"end":{"line":13,"column":1}}],"line":11},"14":{"loc":{"start":{"line":12,"column":11},"end":{"line":12,"column":61}},"type":"cond-expr","locations":[{"start":{"line":12,"column":37},"end":{"line":12,"column":40}},{"start":{"line":12,"column":43},"end":{"line":12,"column":61}}],"line":12},"15":{"loc":{"start":{"line":12,"column":12},"end":{"line":12,"column":33}},"type":"binary-expr","locations":[{"start":{"line":12,"column":12},"end":{"line":12,"column":15}},{"start":{"line":12,"column":19},"end":{"line":12,"column":33}}],"line":12},"16":{"loc":{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},"type":"if","locations":[{"start":{"line":23,"column":12},"end":{"line":25,"column":13}},{"start":{"line":23,"column":12},"end":{"line":25,"column":13}}],"line":23},"17":{"loc":{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},"type":"if","locations":[{"start":{"line":33,"column":12},"end":{"line":35,"column":13}},{"start":{"line":33,"column":12},"end":{"line":35,"column":13}}],"line":33}},"s":{"0":1,"1":2,"2":2,"3":2,"4":2,"5":0,"6":0,"7":0,"8":0,"9":2,"10":1,"11":6,"12":6,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":11,"25":11,"26":11,"27":155,"28":9,"29":11,"30":1,"31":1,"32":1},"f":{"0":2,"1":6,"2":1,"3":0,"4":0,"5":11,"6":155},"b":{"0":[1,1,1],"1":[0,2],"2":[2,0],"3":[2,0],"4":[2,2],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[2,2,2],"10":[1,1,1],"11":[6,0],"12":[6,6],"13":[1,1,1],"14":[1,0],"15":[1,1],"16":[0,0],"17":[9,146]},"inputSourceMap":{"version":3,"file":"AccessControlPolicy.js","sourceRoot":"","sources":["AccessControlPolicy.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA,yEAA+D;AAC/D,oGAAqD;AAGrD,MAAqB,mBAAoB,SAAQ,oBAAU;IAElD,KAAK,CAAC,EAAE,CAAE,IAAiB,EAAE,IAAY;QAC9C,MAAM,OAAO,GAAG,MAAM,uBAAa,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QACpD,IAAI,OAAO,GAAG,KAAK,CAAA;QACnB,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;YAC3B,IAAI,IAAI,KAAK,QAAQ,EAAE;gBACrB,OAAO,GAAG,IAAI,CAAA;aACf;QACH,CAAC,CAAC,CAAA;QACF,OAAO,OAAO,CAAA;IAChB,CAAC;IAGM,KAAK,CAAC,GAAG,CAAE,IAAiB,EAAE,UAAkB;QACrD,MAAM,OAAO,GAAG,MAAM,uBAAa,CAAC,MAAM,CAAC,IAAI,EAAE,EAAE,CAAC,CAAA;QACpD,IAAI,aAAa,GAAG,KAAK,CAAA;QACzB,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,cAAc,CAAC,EAAE;YACvC,IAAI,UAAU,KAAK,cAAc,EAAE;gBACjC,aAAa,GAAG,IAAI,CAAA;aACrB;QACH,CAAC,CAAC,CAAA;QACF,OAAO,aAAa,CAAA;IACtB,CAAC;CACF;AAtBC;IADC,IAAA,gBAAM,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;;;;6CAU5B;AAGD;IADC,IAAA,gBAAM,EAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC;;;;8CAU5B;AAvBH,sCAwBC","sourcesContent":["import { action, BasePolicy } from '@ioc:Adonis/Addons/Bouncer'\nimport AccessControl from 'App/Classes/AccessControl'\nimport User from 'App/Models/User'\n\nexport default class AccessControlPolicy extends BasePolicy {\n  @action({ allowGuest: true })\n  public async is (user: User | null, role: string) {\n    const userACL = await AccessControl.getAcl(user?.id)\n    let hasRole = false\n    userACL.roles.map(thisRole => {\n      if (role === thisRole) {\n        hasRole = true\n      }\n    })\n    return hasRole\n  }\n\n  @action({ allowGuest: true })\n  public async can (user: User | null, permission: string) {\n    const userACL = await AccessControl.getAcl(user?.id)\n    let hasPermission = false\n    userACL.permissions.map(thisPermission => {\n      if (permission === thisPermission) {\n        hasPermission = true\n      }\n    })\n    return hasPermission\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1f40c7447032affcd18fecaebee52c16d4a914e3","contentHash":"0ac5053a6b8b7426acfbe9f4523e963c1a5e35e9d95ac0e30fdbfbf6e0e577d2"},"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Exceptions\\Handler.ts":{"path":"C:\\laragon\\Code\\central-reservas\\central-reservas-api\\app\\Exceptions\\Handler.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":17},"end":{"line":6,"column":85}},"4":{"start":{"line":7,"column":31},"end":{"line":7,"column":113}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":32}},"6":{"start":{"line":13,"column":0},"end":{"line":13,"column":35}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":18},"end":{"line":11,"column":5}},"line":9}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3}},"s":{"0":1,"1":2,"2":1,"3":1,"4":1,"5":10,"6":1},"f":{"0":2,"1":10},"b":{"0":[1,1,1],"1":[0,2],"2":[2,2]},"inputSourceMap":{"version":3,"file":"Handler.js","sourceRoot":"","sources":["Handler.ts"],"names":[],"mappings":";;;;;AAeA,sFAA4C;AAC5C,kHAAwE;AAExE,MAAqB,gBAAiB,SAAQ,8BAAoB;IAChE;QACE,KAAK,CAAC,gBAAM,CAAC,CAAA;IACf,CAAC;CACF;AAJD,mCAIC","sourcesContent":["/*\n|--------------------------------------------------------------------------\n| Http Exception Handler\n|--------------------------------------------------------------------------\n|\n| AdonisJs will forward all exceptions occurred during an HTTP request to\n| the following class. You can learn more about exception handling by\n| reading docs.\n|\n| The exception handler extends a base `HttpExceptionHandler` which is not\n| mandatory, however it can do lot of heavy lifting to handle the errors\n| properly.\n|\n*/\n\nimport Logger from '@ioc:Adonis/Core/Logger'\nimport HttpExceptionHandler from '@ioc:Adonis/Core/HttpExceptionHandler'\n\nexport default class ExceptionHandler extends HttpExceptionHandler {\n  constructor () {\n    super(Logger)\n  }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"97d2156d4a5517faa201351b28ade904438ea62a","contentHash":"fd4b14514210671feb50084bec9c0bb7505b70e431327dcd687843ff4b5cffcc"}}